<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: components/Content/Users/EditUser/EditUser.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: components/Content/Users/EditUser/EditUser.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import React, { useState, useEffect } from 'react'

/**
 * @function EditUser
 * @param props 
 * @returns Formularz edycji użytkownika 
 */
export default function EditUser(props) {

    const email = props.email?props.email:'';
    const phone = props.phone?props.phone:'';
    const nrIndeks = props.nrIndeks?props.nrIndeks:'';
    const [editUser, setEditUser] = useState({
        firstName: props.firstName,
        lastName: props.lastName,
        email: email,
        phone: phone,
        position: props.position,
        nrIndeks: nrIndeks,
    })
    const [errors, setErrors] = useState({
        firstName: '',
        lastName: '',
        email: '',
        phone: '',
        position: '',
        nrIndeks: '',
    })

    const changeFirstNameHandler = event => {
        const value = event.target.value.toUpperCase();
        setEditUser({...editUser, firstName: value});
    }

    const changeLastNameHandler = event => {
        const value = event.target.value.toUpperCase();
        setEditUser({...editUser, lastName: value});
    }

    const changeEmailHandler = event => {
        const value = event.target.value.toLowerCase();
        setEditUser({...editUser, email: value});
    }

    const changePhoneHandler = event => {
        const value = event.target.value;
        setEditUser({...editUser, phone: value});
    }

    const changePositionHandler = event => {
        const value = event.target.value;
        setEditUser({...editUser, position: value});
    }

    const changeNrIndeksHandler = event => {
        const value = event.target.value;
        setEditUser({...editUser, nrIndeks: value});
    }

    /**
     * tworzy i przekazuje obiekt do funkcji która edytuje obiekt o podanym id kolkecji danych 
     * @function onEdit
     */
    const onEdit = () => {
        const user = {
            firstName: editUser.firstName,
            lastName: editUser.lastName,
            email: editUser.email,
            phone: editUser.phone,
            position: editUser.position,
            nrIndeks: editUser.nrIndeks,
            _id: props._id
        };
        props.onEdit(user);
    }

    function validateEmail(email) {
        const re = /^(([^&lt;>()[\]\\.,;:\s@"]+(\.[^&lt;>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
        return re.test(email)
    }

    useEffect (() => {
        if (editUser.firstName.length>=3 &amp;&amp; editUser.firstName.length &lt; 30) {
            setErrors({...errors, firstName: ''})
        } else {
            setErrors({...errors, firstName: 'Imię powinno zawierać 3 - 30 znaków'})
        }
    }, [editUser.firstName])
    
    useEffect (() => {
        if (editUser.lastName.length>=3 &amp;&amp; editUser.lastName.length &lt; 30) {
            setErrors({...errors, lastName: ''})
        } else {
            setErrors({...errors, lastName: 'Nazwisko powinno zawierać 3 - 30 znaków'})
        }
    }, [editUser.lastName])

    useEffect (() => {
        if (editUser.nrIndeks.length>0) {
            setErrors({...errors, nrIndeks: ''})
        } else {
            setErrors({...errors, nrIndeks: 'Puste pole'})
        }
    }, [editUser.nrIndeks])

    useEffect (() => {
        if (validateEmail(editUser.email)|| '') {
            setErrors({...errors, email: ''})
        } else {
            setErrors({...errors, email: 'Niepoprawny e-mail'})
        }
    }, [editUser.email])

    useEffect (() => {
        if (isNaN(editUser.phone)) {
        setErrors({...errors, phone: 'Niepoprawny numer telefonu'})
        } else if  (editUser.phone.length >= 4 &amp;&amp; editUser.phone.length &lt;= 15 ) {
            setErrors({...errors, phone: ''})
        }else{
            setErrors({...errors, phone: 'Numer telefonu powinien zawierać 4 - 15 cyfr '})
        }
    }, [editUser.phone])
    
    const disabledBtn = Object.values(errors).filter(x => x).length || !(Object.values(editUser).filter(x => x).length===6)

    return (
        &lt;div>
        &lt;label>Imię:&lt;/label>
        &lt;input 
            className = {`form-control ${errors.firstName ? 'is-invalid' : ''}`}
            type="text" 
            value={editUser.firstName} 
            onChange={changeFirstNameHandler} />
            &lt;div className="invalid-feedback">
                    {errors.firstName}
            &lt;/div> 
       
        &lt;label>Nazwisko:&lt;/label>
        &lt;input
            className = {`form-control ${errors.lastName ? 'is-invalid' : ''}`}
            type="text" 
            value={editUser.lastName}
            onChange={changeLastNameHandler} />
            &lt;div className="invalid-feedback">
                    {errors.lastName}
            &lt;/div>

        &lt;label>Pozycja:&lt;/label>
        &lt;input 
            className = "form-control"
            type="text" 
            value={editUser.position}
            onChange={changePositionHandler} />

        &lt;label>Numer Dokumentu:&lt;/label>
        &lt;input 
            className = {`form-control ${errors.nrIndeks ? 'is-invalid' : ''}`}
            type="text" 
            value={nrIndeks}
            onChange={changeNrIndeksHandler} />
            &lt;div className="invalid-feedback">
                    {errors.nrIndeks}
            &lt;/div>   
        
        &lt;label>E-mail:&lt;/label>
        &lt;input 
            className = {`form-control ${errors.email ? 'is-invalid' : ''}`}
            type="text" 
            value={editUser.email}
            onChange={changeEmailHandler} />
            &lt;div className="invalid-feedback">
                    {errors.email}
            &lt;/div>   
    
        &lt;label>Telefon:&lt;/label>
        &lt;input 
            className = {`form-control ${errors.phone ? 'is-invalid' : ''}`}
            type="text" 
            value={editUser.phone}
            onChange={changePhoneHandler} />
            &lt;div className="invalid-feedback">
                    {errors.phone}
            &lt;/div>  

        &lt;button onClick={() => onEdit()} disabled={disabledBtn}>Zapisz&lt;/button>
    &lt;/div>
    );
}</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="ErrorBoundary.html">ErrorBoundary</a></li></ul><h3>Global</h3><ul><li><a href="global.html#addObject">addObject</a></li><li><a href="global.html#addUser">addUser</a></li><li><a href="global.html#App">App</a></li><li><a href="global.html#changeContent">changeContent</a></li><li><a href="global.html#changeHandler">changeHandler</a></li><li><a href="global.html#Clock">Clock</a></li><li><a href="global.html#colorChange">colorChange</a></li><li><a href="global.html#Content">Content</a></li><li><a href="global.html#DataHeader">DataHeader</a></li><li><a href="global.html#deleteUser">deleteUser</a></li><li><a href="global.html#editHandler">editHandler</a></li><li><a href="global.html#EditUser">EditUser</a></li><li><a href="global.html#editUser">editUser</a></li><li><a href="global.html#editUserHandler">editUserHandler</a></li><li><a href="global.html#fetchBack">fetchBack</a></li><li><a href="global.html#focusInput">focusInput</a></li><li><a href="global.html#Footer">Footer</a></li><li><a href="global.html#Header">Header</a></li><li><a href="global.html#Layout">Layout</a></li><li><a href="global.html#Loading">Loading</a></li><li><a href="global.html#makeTemp">makeTemp</a></li><li><a href="global.html#Menu">Menu</a></li><li><a href="global.html#monthBefore">monthBefore</a></li><li><a href="global.html#NewUser">NewUser</a></li><li><a href="global.html#onEdit">onEdit</a></li><li><a href="global.html#reducer">reducer</a></li><li><a href="global.html#RoomsCalendar">RoomsCalendar</a></li><li><a href="global.html#sameValue">sameValue</a></li><li><a href="global.html#Search">Search</a></li><li><a href="global.html#searchHandler">searchHandler</a></li><li><a href="global.html#Searching">Searching</a></li><li><a href="global.html#tableMaker">tableMaker</a></li><li><a href="global.html#toggleModal">toggleModal</a></li><li><a href="global.html#User">User</a></li><li><a href="global.html#Users">Users</a></li><li><a href="global.html#validateEmail">validateEmail</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.7</a> on Fri Sep 03 2021 15:52:50 GMT+0200 (czas środkowoeuropejski letni)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
